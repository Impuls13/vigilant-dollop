# Навигатор по торговому центру

Веб-приложение на Python с использованием FastAPI для поиска кратчайшего пути между двумя точками на карте торгового центра с помощью алгоритма A* (A-star).

## Описание проекта

Приложение позволяет пользователям выбирать две точки (начальную и конечную) на карте торгового центра и находит кратчайший путь между ними, используя алгоритм A*. Карта представляет собой изображение в формате JPEG, на котором определены ключевые навигационные точки (узлы) и связи между ними (рёбра).

### Основные возможности

- Загрузка графа навигационных точек из JSON-файла
- Поиск кратчайшего пути между двумя точками с помощью алгоритма A*
- Визуализация найденного пути на карте торгового центра
- REST API для получения списка узлов и расчета маршрута
- Простой веб-интерфейс для взаимодействия с приложением

### Технологии

- **Backend**: Python, FastAPI
- **Frontend**: HTML, CSS, JavaScript
- **Алгоритм маршрутизации**: A* (A-star)
- **Тестирование**: pytest

## Структура проекта

```
mall-pathfinder/
├── app/
│   ├── main.py           # Основной файл FastAPI приложения
│   ├── pathfinder.py     # Модуль с реализацией алгоритма A*
│   └── models.py         # Модели данных (Pydantic)
├── static/
│   ├── js/
│   │   └── app.js        # JavaScript для фронтенда
│   ├── css/
│   │   └── style.css     # Стили для фронтенда
│   └── images/
│       └── mall-map.jpg  # Изображение карты торгового центра
├── templates/
│   └── index.html        # HTML шаблон для фронтенда
├── data/
│   └── graph.json        # JSON с узлами и связями
├── tests/
│   └── test_pathfinder.py # Тесты для модуля pathfinder
├── requirements.txt      # Зависимости проекта
└── README.md             # Документация
```

## Установка и запуск

### Предварительные требования

- Python 3.8 или выше
- pip (менеджер пакетов Python)

### Установка

1. Клонируйте репозиторий или распакуйте архив с проектом:

```bash
git clone <url-репозитория>
cd mall-pathfinder
```

2. Создайте виртуальное окружение Python и активируйте его:

```bash
# Для Linux/macOS
python -m venv venv
source venv/bin/activate

# Для Windows
python -m venv venv
venv\Scripts\activate
```

3. Установите зависимости:

```bash
pip install -r requirements.txt
```

### Настройка

1. Замените файл `static/images/mall-map.jpg` на изображение вашей карты торгового центра.

2. Отредактируйте файл `data/graph.json`, чтобы определить узлы и связи на вашей карте:

```json
{
  "nodes": {
    "A": {"x": 100, "y": 150},
    "B": {"x": 300, "y": 150},
    "C": {"x": 300, "y": 300}
  },
  "edges": {
    "A": ["B"],
    "B": ["A", "C"],
    "C": ["B"]
  }
}
```

### Запуск

1. Запустите приложение:

```bash
uvicorn app.main:app --reload
```

2. Откройте веб-браузер и перейдите по адресу:

```
http://localhost:8000
```

## Использование API

### Получение списка узлов

```
GET /api/nodes
```

Ответ:

```json
{
  "A": {"x": 100, "y": 150},
  "B": {"x": 300, "y": 150},
  "C": {"x": 300, "y": 300}
}
```

### Расчет маршрута

```
POST /api/route
```

Тело запроса:

```json
{
  "start": "A",
  "end": "C"
}
```

Ответ:

```json
{
  "route": [
    {"x": 100, "y": 150},
    {"x": 300, "y": 150},
    {"x": 300, "y": 300}
  ]
}
```

## Запуск тестов

Для запуска тестов выполните:

```bash
pytest
```

## Дополнительная информация

### Алгоритм A*

Алгоритм A* (A-star) - это алгоритм поиска пути, который находит кратчайший путь между двумя вершинами взвешенного графа. Он использует эвристическую функцию для оценки расстояния до цели и выбора наиболее перспективных вершин для исследования.

В данном проекте в качестве эвристики используется евклидово расстояние между точками на карте.

### Настройка собственной карты

Для использования собственной карты торгового центра:

1. Замените файл `static/images/mall-map.jpg` на ваше изображение
2. Определите ключевые навигационные точки (узлы) и их координаты на изображении
3. Определите связи между узлами (какие узлы соединены напрямую)
4. Обновите файл `data/graph.json` с новыми данными

## Лицензия

Этот проект распространяется под лицензией MIT.